<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>index</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-1d4f84655f446305ac42a8f1abcf7405.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/intersection-observer-polyfill-1.0.0/intersection-observer.js"></script>
<script src="site_libs/quarto-contrib/scrollama-3.2.0/scrollama.min.js"></script>
<script src="site_libs/quarto-contrib/closeread-0.1.0/closeread.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">

<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>

<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">

<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>

<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>

<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">

<script src="site_libs/leaflet-binding-2.2.3/leaflet.js"></script>

<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>

<script src="site_libs/leaflet-providers-plugin-2.2.3/leaflet-providers-plugin.js"></script>

<meta cr-debug-mode="false">
<meta cr-remove-header-space="false">


<link rel="stylesheet" href="site_libs\quarto-contrib\quarto-project\qmd-lab\closeread\closeread.css">
</head>

<body class="quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<div style="text-align: center;">
<p><img src="twhc-logo.jpg" class="img-fluid"></p>
</div>
<section id="the-geography-of-healthcare" class="level1 page-columns page-full">
<h1>THE GEOGRAPHY OF HEALTHCARE</h1>
<section id="mobile-womens-health-clinics-in-texas" class="level2">
<h2 class="anchored" data-anchor-id="mobile-womens-health-clinics-in-texas">MOBILE WOMEN’S HEALTH CLINICS IN TEXAS</h2>
<section id="section-1-highlighting-need" class="level3">
<h3 class="anchored" data-anchor-id="section-1-highlighting-need">Section 1: Highlighting Need</h3>
<p>Across the 268,597 square miles of Texas, access to women’s healthcare is deeply uneven. Large regions of the state function as “healthcare deserts,” where high- population communities have few or sometimes no access to nearby clinics providing essential services like contraception, cancer screenings, and preventive care. Many rural Texans face long travel distances, limited transportation options, and months-long wait times.</p>
<div class="cr-section cr-column-screen overlay-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-myimage">
<div class="narrative">
<p>These barriers make timely, comprehensive healthcare out of reach for many, underscoring the urgent need for solutions that meet people where they are.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>That’s where mobile health care units come in.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p><strong>Use the bar on the left to scroll through this story</strong></p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-myimage" class="sticky">


<style>
.hero-video { width: 100%; height: 100vh; overflow: hidden; }
.hero-video video { width: 100vw; height: 100%; object-fit: cover; display: block; }
</style>

<div class="hero-video">
  <video autoplay="" muted="" loop="" playsinline="" preload="auto">
    <source src="output_video.mp4" type="video/mp4">
  </video>
</div>




</div>
</div>
</div>
</div>
</section>
<section id="section-2-health-outcomes." class="level3">
<h3 class="anchored" data-anchor-id="section-2-health-outcomes.">Section 2: Health Outcomes.</h3>
<div class="cr-section quote-section cr-column-screen overlay-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-mytext1">
<div class="narrative">
<p>Learn more.</p>
</div>
</div>
<div class="trigger new-trigger" data-hlz="cr-t1,cr-t2" data-focus-on="cr-mytext1">
<div class="narrative">
<p>This is quite important here!</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-mytext1" class="cr-text scale-to-fill sticky">
<div class="line-block"><span id="lb1-1">The impact on women’s health has been</span><br>
<span id="lb1-2">especially severe. Nearly half of</span><br>
<span id="lb1-3">Texas counties (46.5%) are classified as</span><br>
<span id="lb1-4"><span id="cr-t1">maternity care deserts</span>,</span><br>
<span id="lb1-5">meaning they lack access to</span><br>
<span id="lb1-6">birthing facilities</span><br>
<span id="lb1-7">or maternity care providers altogether.</span><br>
<span id="lb1-8">For thousands of women, even basic</span><br>
<span id="lb1-9">pregnancy care requires</span><br>
<span id="lb1-10">traveling far from home,</span><br>
<span id="lb1-11"><span id="cr-t2">4.6% of Texas women</span> live</span><br>
<span id="lb1-12">more than 30 minutes from</span><br>
<span id="lb1-13">the nearest birthing hospital.</span></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="section-test-map-switching" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="section-test-map-switching">Section: Test map switching</h2>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-map">
<div class="narrative">
<p>Layer A.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-map">
<div class="narrative">
<p>Layer B.</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-map" class="sticky">
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.13.1, GDAL 3.11.4, PROJ 9.7.0; sf_use_s2() is TRUE</code></pre>
</div>
<div class="cell-output-display">
<div id="test_map" style="width:68vw;height:75vh;" class="leaflet html-widget"></div>
<script type="application/json" data-for="test_map">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[29,29,30,30,29]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[29,29,30,30,29]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[29,29,30,30,29]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[29,29,30,30,29]}]],[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[30,30,31,31,30]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[30,30,31,31,30]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[30,30,31,31,30]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[30,30,31,31,30]}]],[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[31,31,32,32,31]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[31,31,32,32,31]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[31,31,32,32,31]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[31,31,32,32,31]}]],[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[32,32,33,33,32]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[32,32,33,33,32]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[32,32,33,33,32]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[32,32,33,33,32]}]]],null,"Layer B",{"interactive":true,"className":"","stroke":true,"color":"white","weight":1,"opacity":0.5,"fill":true,"fillColor":["#D9E6E4","#CCDBDA","#C0D0CF","#B4C6C5","#A7BBBB","#9BB1B1","#8FA6A7","#849C9D","#789293","#6C888A","#617E80","#557577","#4A6B6E","#3F6165","#34585C","#284F53"],"fillOpacity":0.8,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[29,29,30,30,29]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[29,29,30,30,29]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[29,29,30,30,29]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[29,29,30,30,29]}]],[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[30,30,31,31,30]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[30,30,31,31,30]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[30,30,31,31,30]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[30,30,31,31,30]}]],[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[31,31,32,32,31]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[31,31,32,32,31]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[31,31,32,32,31]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[31,31,32,32,31]}]],[[{"lng":[-99,-97.5,-97.5,-99,-99],"lat":[32,32,33,33,32]}]],[[{"lng":[-97.5,-96,-96,-97.5,-97.5],"lat":[32,32,33,33,32]}]],[[{"lng":[-96,-94.5,-94.5,-96,-96],"lat":[32,32,33,33,32]}]],[[{"lng":[-94.5,-93,-93,-94.5,-94.5],"lat":[32,32,33,33,32]}]]],null,"Layer A",{"interactive":true,"className":"","stroke":true,"color":"white","weight":1,"opacity":0.5,"fill":true,"fillColor":["#E6D9E4","#DCCCD9","#D1BFCF","#C7B3C4","#BDA7BA","#B39AB0","#A98EA5","#9F829B","#967691","#8C6B87","#825F7E","#795474","#6F496B","#663E61","#5C3358","#53284F"],"fillOpacity":0.8,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Layer A","Layer B"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"hideGroup","args":["Layer B"]}],"limits":{"lat":[29,33],"lng":[-99,-93]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="136" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 135;"><span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> mapId <span class="op">=</span> <span class="st">"test_map"</span><span class="op">;</span></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> labels <span class="op">=</span> [<span class="st">"Layer A"</span><span class="op">,</span> <span class="st">"Layer B"</span>]<span class="op">;</span></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sleep <span class="op">=</span> (ms) <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Promise</span>(r <span class="kw">=&gt;</span> <span class="pp">setTimeout</span>(r<span class="op">,</span> ms))<span class="op">;</span></span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> clamp <span class="op">=</span> (i) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(labels<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> <span class="bu">Number</span>(i <span class="op">??</span> <span class="dv">0</span>)))<span class="op">;</span></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getLeafletMap</span>() {</span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sel <span class="op">=</span> <span class="vs">`#</span><span class="sc">${</span>mapId<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> w <span class="op">=</span> globalThis<span class="op">.</span><span class="at">HTMLWidgets</span><span class="op">?.</span><span class="at">find</span><span class="op">?.</span>(sel)<span class="op">;</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (w<span class="op">?.</span><span class="at">getMap</span>) <span class="cf">return</span> w<span class="op">.</span><span class="fu">getMap</span>()<span class="op">;</span></span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (e) {}</span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> w2 <span class="op">=</span> globalThis<span class="op">.</span><span class="at">HTMLWidgets</span><span class="op">?.</span><span class="at">find</span><span class="op">?.</span>(mapId)<span class="op">;</span></span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (w2<span class="op">?.</span><span class="at">getMap</span>) <span class="cf">return</span> w2<span class="op">.</span><span class="fu">getMap</span>()<span class="op">;</span></span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (e) {}</span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getLayerControlRoot</span>() {</span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> el <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(mapId)<span class="op">;</span></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> el <span class="op">?</span> el<span class="op">.</span><span class="fu">querySelector</span>(<span class="st">".leaflet-control-layers"</span>) <span class="op">:</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getTriggersForSection</span>() {</span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> mapEl <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(mapId)<span class="op">;</span></span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>mapEl) <span class="cf">return</span> []<span class="op">;</span></span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> section <span class="op">=</span> mapEl<span class="op">.</span><span class="fu">closest</span>(<span class="st">".cr-section"</span>) <span class="op">||</span> <span class="bu">document</span><span class="op">;</span></span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(section<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">".narrative-col .trigger"</span>))<span class="op">;</span></span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getActiveTriggerIndex</span>() {</span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> triggers <span class="op">=</span> <span class="fu">getTriggersForSection</span>()<span class="op">;</span></span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>triggers<span class="op">.</span><span class="at">length</span>) <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a>    <span class="co">// pick the trigger whose center is closest to viewport center</span></span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> vc <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> bestIdx <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> bestDist <span class="op">=</span> <span class="kw">Infinity</span><span class="op">;</span></span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> triggers<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> r <span class="op">=</span> triggers[i]<span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">;</span></span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> c <span class="op">=</span> (r<span class="op">.</span><span class="at">top</span> <span class="op">+</span> r<span class="op">.</span><span class="at">bottom</span>) <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> d <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(c <span class="op">-</span> vc)<span class="op">;</span></span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (d <span class="op">&lt;</span> bestDist) {</span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a>        bestDist <span class="op">=</span> d<span class="op">;</span></span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a>        bestIdx <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">clamp</span>(bestIdx)<span class="op">;</span></span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="kw">function</span> <span class="fu">setBaseByLabel</span>(label) {</span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> control <span class="op">=</span> <span class="fu">getLayerControlRoot</span>()<span class="op">;</span></span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>control) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> all <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(control<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">"label"</span>))<span class="op">;</span></span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> target <span class="op">=</span> all<span class="op">.</span><span class="fu">find</span>(l <span class="kw">=&gt;</span> (l<span class="op">.</span><span class="at">textContent</span> <span class="op">||</span> <span class="st">""</span>)<span class="op">.</span><span class="fu">trim</span>()<span class="op">.</span><span class="fu">includes</span>(label))<span class="op">;</span></span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>target) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> input <span class="op">=</span> target<span class="op">.</span><span class="fu">querySelector</span>(<span class="st">"input[type='radio']"</span>)<span class="op">;</span></span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input <span class="op">&amp;&amp;</span> <span class="op">!</span>input<span class="op">.</span><span class="at">checked</span>) input<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Prevent feedback loops while we programmatically toggle layers</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> suppressScrollToMapUntil <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>  globalThis<span class="op">.</span><span class="at">__crSuppressScrollToMapUntil</span> <span class="op">=</span> () <span class="kw">=&gt;</span> suppressScrollToMapUntil<span class="op">;</span></span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a>  globalThis<span class="op">.</span><span class="at">setLayer</span> <span class="op">=</span> <span class="kw">async</span> (idxRaw) <span class="kw">=&gt;</span> {</span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> idx <span class="op">=</span> <span class="fu">clamp</span>(idxRaw)<span class="op">;</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>    suppressScrollToMapUntil <span class="op">=</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>() <span class="op">+</span> <span class="dv">450</span><span class="op">;</span></span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">60</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">getLayerControlRoot</span>()) <span class="cf">break</span><span class="op">;</span></span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">sleep</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">setBaseByLabel</span>(labels[idx])<span class="op">;</span></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>    <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="kw">function</span> <span class="fu">installScrollDrivesLayer</span>() {</span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Wait for map + layer control to exist</span></span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">80</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> map <span class="op">=</span> <span class="fu">getLeafletMap</span>()<span class="op">;</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (map <span class="op">&amp;&amp;</span> <span class="fu">getLayerControlRoot</span>()) <span class="cf">break</span><span class="op">;</span></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">sleep</span>(<span class="dv">50</span>)<span class="op">;</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Avoid double-install</span></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> key <span class="op">=</span> <span class="st">"__crScrollDrivesLayerInstalled"</span><span class="op">;</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (globalThis[key]) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a>    globalThis[key] <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> lastIdx <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ticking <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> updateFromScroll <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a>      ticking <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>() <span class="op">&lt;</span> suppressScrollToMapUntil) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> idx <span class="op">=</span> <span class="fu">getActiveTriggerIndex</span>()<span class="op">;</span></span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (idx <span class="op">===</span> lastIdx) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a>      lastIdx <span class="op">=</span> idx<span class="op">;</span></span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> globalThis<span class="op">.</span><span class="fu">setLayer</span>(idx)<span class="op">;</span></span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> onScroll <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (ticking) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a>      ticking <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a>      <span class="fu">requestAnimationFrame</span>(updateFromScroll)<span class="op">;</span></span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Drive layers from scroll position</span></span>
<span id="cb2-252"><a href="#cb2-252" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"scroll"</span><span class="op">,</span> onScroll<span class="op">,</span> { <span class="dt">passive</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb2-253"><a href="#cb2-253" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"resize"</span><span class="op">,</span> onScroll<span class="op">,</span> { <span class="dt">passive</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb2-254"><a href="#cb2-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-255"><a href="#cb2-255" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Also update when Closeread changes the active trigger without a “scroll” event</span></span>
<span id="cb2-256"><a href="#cb2-256" aria-hidden="true" tabindex="-1"></a>    <span class="co">// (some implementations toggle classes / transforms). This is cheap and robust.</span></span>
<span id="cb2-257"><a href="#cb2-257" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> triggers <span class="op">=</span> <span class="fu">getTriggersForSection</span>()<span class="op">;</span></span>
<span id="cb2-258"><a href="#cb2-258" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (triggers<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb2-259"><a href="#cb2-259" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> obs <span class="op">=</span> <span class="kw">new</span> <span class="bu">MutationObserver</span>(onScroll)<span class="op">;</span></span>
<span id="cb2-260"><a href="#cb2-260" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">const</span> t <span class="kw">of</span> triggers) {</span>
<span id="cb2-261"><a href="#cb2-261" aria-hidden="true" tabindex="-1"></a>        obs<span class="op">.</span><span class="fu">observe</span>(t<span class="op">,</span> { <span class="dt">attributes</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">attributeFilter</span><span class="op">:</span> [<span class="st">"class"</span><span class="op">,</span> <span class="st">"style"</span>] })<span class="op">;</span></span>
<span id="cb2-262"><a href="#cb2-262" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-263"><a href="#cb2-263" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-264"><a href="#cb2-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-265"><a href="#cb2-265" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initial set based on current scroll position</span></span>
<span id="cb2-266"><a href="#cb2-266" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">updateFromScroll</span>()<span class="op">;</span></span>
<span id="cb2-267"><a href="#cb2-267" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-268"><a href="#cb2-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-269"><a href="#cb2-269" aria-hidden="true" tabindex="-1"></a>  <span class="co">// IMPORTANT: remove the baselayerchange -&gt; scrollToTrigger behavior.</span></span>
<span id="cb2-270"><a href="#cb2-270" aria-hidden="true" tabindex="-1"></a>  <span class="co">// The user can still click the layer control manually; it just won't force-scroll the narrative.</span></span>
<span id="cb2-271"><a href="#cb2-271" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> <span class="fu">installScrollDrivesLayer</span>()<span class="op">;</span></span>
<span id="cb2-272"><a href="#cb2-272" aria-hidden="true" tabindex="-1"></a>  <span class="kw">null</span></span>
<span id="cb2-273"><a href="#cb2-273" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb3" data-startfrom="279" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 278;"><span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="kw">typeof</span> crTriggerIndex <span class="op">!==</span> <span class="st">"undefined"</span> <span class="op">&amp;&amp;</span> <span class="kw">typeof</span> globalThis<span class="op">.</span><span class="at">setLayer</span> <span class="op">===</span> <span class="st">"function"</span>) {</span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> until <span class="op">=</span> globalThis<span class="op">.</span><span class="at">__crSuppressScrollToMapUntil</span><span class="op">?.</span>() <span class="op">??</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>() <span class="op">&gt;=</span> until) {</span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a>      globalThis<span class="op">.</span><span class="fu">setLayer</span>(crTriggerIndex)<span class="op">;</span></span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>  <span class="kw">null</span></span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<section id="section-4-introduce-the-concept-of-mobile-clinics" class="level3">
<h3 class="anchored" data-anchor-id="section-4-introduce-the-concept-of-mobile-clinics">Section 4: Introduce the concept of mobile clinics</h3>
<p>Mobile healthcare units are designed to close gaps by bringing services directly to patients and communities, especially in rural areas. Mobile clinics reduce the distance, time, and cost barriers that prevent many women from accessing care. Mobile clinics set up in trusted community spaces and adapt their routes based on need. They offer a flexible, efficient way to deliver essential women’s health services, such as birth control, cancer screenings, prenatal care, and preventive visits. For women who don’t have reliable access to transportation, mobile clinics can be a literal lifeline. When speaking to patients, they praise the convenience, as they are no longer required to travel hours from home, miss work, school, or childcare. Mobile clinics don’t just expand access; they help ensure care happens earlier, more consistently, and on patients’ terms.</p>
</section>
<section id="section-5-legislation" class="level3">
<h3 class="anchored" data-anchor-id="section-5-legislation">Section 5: Legislation</h3>
<div id="cr-myimage1">
<p><img src="txcapitol.gif" class="img-fluid"></p>
</div>
<p>During the 89th Legislative Session, the Texas Women’s Healthcare Coalition and its partners secured $20 million in new state funding to expand mobile women’s health units across Texas, doubling down on a commitment to meet women where they are. This investment represents $10 million more than the amount secured in 2023, signaling growing legislative recognition of mobile healthcare as a critical solution to access gaps. This funding is the direct result of sustained, collective advocacy and a willingness by providers to find innovative solutions to reach the counties around them.</p>
</section>
<section id="section-6-on-the-road" class="level3">
<h3 class="anchored" data-anchor-id="section-6-on-the-road">Section 6: On the road</h3>
<p>A single mobile health unit can extend care across multiple counties that aren’t served by brick-and-mortar clinics. This map illustrates how mobile units move across regions with limited or no permanent healthcare infrastructures, reaching women who would otherwise face transportation barriers, or even no access at all.</p>
</section>
<section id="section-7-on-the-ground" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="section-7-on-the-ground">Section 7: On the ground</h3>
<div class="column-screen">

<style>
/* remove default padding that creates the “white gutter” */
.column-screen { padding-left: 0 !important; padding-right: 0 !important; }
.column-screen > * { margin-left: 0 !important; margin-right: 0 !important; }

.video-wrap{
  width: 100%;
  aspect-ratio: 16 / 9;
  max-height: 100vh;
  position: relative;
  background: #0075A9E6;
}
.video-wrap iframe{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
}
</style>

<div class="video-wrap">
  <iframe src="https://www.youtube.com/embed/rwSMgGkb8sI?controls=0&amp;modestbranding=1&amp;rel=0&amp;playsinline=1" allow="encrypted-media; picture-in-picture" allowfullscreen="">
  </iframe>
</div>


</div>
<div class="cr-section quote-section cr-column-screen overlay-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-mytext2">
<div class="narrative">
<p>Learn more.</p>
</div>
</div>
<div class="trigger new-trigger" data-hlz="cr-t1,cr-t2" data-focus-on="cr-mytext2">
<div class="narrative">
<p>Scroll on.</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-mytext2" class="cr-text scale-to-fill sticky">
<div class="line-block"><span id="lb2-1">“Now we’re able to do a <span id="cr-t1">full clinic</span>, just like a brick-and-mortar clinic, <span id="cr-t2">just on wheels</span>.”</span><br>
<span id="lb2-2">— Dr.&nbsp;Perales, DNP, APRN, CNS-BC</span><br>
<span id="lb2-3">Clinic Service Director, STFPHC</span><br>
<span id="lb2-4"></span></div>
</div>
</div>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcbiAgY29uc3QgbWFwSWQgPSBcInRlc3RfbWFwXCI7XG4gIGNvbnN0IGxhYmVscyA9IFtcIkxheWVyIEFcIiwgXCJMYXllciBCXCJdO1xuICBjb25zdCBzbGVlcCA9IChtcykgPT4gbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIG1zKSk7XG4gIGNvbnN0IGNsYW1wID0gKGkpID0+IE1hdGgubWF4KDAsIE1hdGgubWluKGxhYmVscy5sZW5ndGggLSAxLCBOdW1iZXIoaSA/PyAwKSkpO1xuXG4gIGZ1bmN0aW9uIGdldExlYWZsZXRNYXAoKSB7XG4gICAgY29uc3Qgc2VsID0gYCMke21hcElkfWA7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHcgPSBnbG9iYWxUaGlzLkhUTUxXaWRnZXRzPy5maW5kPy4oc2VsKTtcbiAgICAgIGlmICh3Py5nZXRNYXApIHJldHVybiB3LmdldE1hcCgpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHcyID0gZ2xvYmFsVGhpcy5IVE1MV2lkZ2V0cz8uZmluZD8uKG1hcElkKTtcbiAgICAgIGlmICh3Mj8uZ2V0TWFwKSByZXR1cm4gdzIuZ2V0TWFwKCk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExheWVyQ29udHJvbFJvb3QoKSB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXBJZCk7XG4gICAgcmV0dXJuIGVsID8gZWwucXVlcnlTZWxlY3RvcihcIi5sZWFmbGV0LWNvbnRyb2wtbGF5ZXJzXCIpIDogbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRyaWdnZXJzRm9yU2VjdGlvbigpIHtcbiAgICBjb25zdCBtYXBFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1hcElkKTtcbiAgICBpZiAoIW1hcEVsKSByZXR1cm4gW107XG4gICAgY29uc3Qgc2VjdGlvbiA9IG1hcEVsLmNsb3Nlc3QoXCIuY3Itc2VjdGlvblwiKSB8fCBkb2N1bWVudDtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShzZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmFycmF0aXZlLWNvbCAudHJpZ2dlclwiKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBY3RpdmVUcmlnZ2VySW5kZXgoKSB7XG4gICAgY29uc3QgdHJpZ2dlcnMgPSBnZXRUcmlnZ2Vyc0ZvclNlY3Rpb24oKTtcbiAgICBpZiAoIXRyaWdnZXJzLmxlbmd0aCkgcmV0dXJuIDA7XG5cbiAgICAvLyBwaWNrIHRoZSB0cmlnZ2VyIHdob3NlIGNlbnRlciBpcyBjbG9zZXN0IHRvIHZpZXdwb3J0IGNlbnRlclxuICAgIGNvbnN0IHZjID0gd2luZG93LmlubmVySGVpZ2h0IC8gMjtcbiAgICBsZXQgYmVzdElkeCA9IDA7XG4gICAgbGV0IGJlc3REaXN0ID0gSW5maW5pdHk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWdnZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByID0gdHJpZ2dlcnNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBjID0gKHIudG9wICsgci5ib3R0b20pIC8gMjtcbiAgICAgIGNvbnN0IGQgPSBNYXRoLmFicyhjIC0gdmMpO1xuICAgICAgaWYgKGQgPCBiZXN0RGlzdCkge1xuICAgICAgICBiZXN0RGlzdCA9IGQ7XG4gICAgICAgIGJlc3RJZHggPSBpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xhbXAoYmVzdElkeCk7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBzZXRCYXNlQnlMYWJlbChsYWJlbCkge1xuICAgIGNvbnN0IGNvbnRyb2wgPSBnZXRMYXllckNvbnRyb2xSb290KCk7XG4gICAgaWYgKCFjb250cm9sKSByZXR1cm47XG5cbiAgICBjb25zdCBhbGwgPSBBcnJheS5mcm9tKGNvbnRyb2wucXVlcnlTZWxlY3RvckFsbChcImxhYmVsXCIpKTtcbiAgICBjb25zdCB0YXJnZXQgPSBhbGwuZmluZChsID0+IChsLnRleHRDb250ZW50IHx8IFwiXCIpLnRyaW0oKS5pbmNsdWRlcyhsYWJlbCkpO1xuICAgIGlmICghdGFyZ2V0KSByZXR1cm47XG5cbiAgICBjb25zdCBpbnB1dCA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ncmFkaW8nXVwiKTtcbiAgICBpZiAoaW5wdXQgJiYgIWlucHV0LmNoZWNrZWQpIGlucHV0LmNsaWNrKCk7XG4gIH1cblxuICAvLyBQcmV2ZW50IGZlZWRiYWNrIGxvb3BzIHdoaWxlIHdlIHByb2dyYW1tYXRpY2FsbHkgdG9nZ2xlIGxheWVyc1xuICBsZXQgc3VwcHJlc3NTY3JvbGxUb01hcFVudGlsID0gMDtcblxuICBnbG9iYWxUaGlzLl9fY3JTdXBwcmVzc1Njcm9sbFRvTWFwVW50aWwgPSAoKSA9PiBzdXBwcmVzc1Njcm9sbFRvTWFwVW50aWw7XG5cbiAgZ2xvYmFsVGhpcy5zZXRMYXllciA9IGFzeW5jIChpZHhSYXcpID0+IHtcbiAgICBjb25zdCBpZHggPSBjbGFtcChpZHhSYXcpO1xuICAgIHN1cHByZXNzU2Nyb2xsVG9NYXBVbnRpbCA9IERhdGUubm93KCkgKyA0NTA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDYwOyBpKyspIHtcbiAgICAgIGlmIChnZXRMYXllckNvbnRyb2xSb290KCkpIGJyZWFrO1xuICAgICAgYXdhaXQgc2xlZXAoNTApO1xuICAgIH1cblxuICAgIGF3YWl0IHNldEJhc2VCeUxhYmVsKGxhYmVsc1tpZHhdKTtcbiAgICBudWxsO1xuICB9O1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGluc3RhbGxTY3JvbGxEcml2ZXNMYXllcigpIHtcbiAgICAvLyBXYWl0IGZvciBtYXAgKyBsYXllciBjb250cm9sIHRvIGV4aXN0XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XG4gICAgICBjb25zdCBtYXAgPSBnZXRMZWFmbGV0TWFwKCk7XG4gICAgICBpZiAobWFwICYmIGdldExheWVyQ29udHJvbFJvb3QoKSkgYnJlYWs7XG4gICAgICBhd2FpdCBzbGVlcCg1MCk7XG4gICAgfVxuXG4gICAgLy8gQXZvaWQgZG91YmxlLWluc3RhbGxcbiAgICBjb25zdCBrZXkgPSBcIl9fY3JTY3JvbGxEcml2ZXNMYXllckluc3RhbGxlZFwiO1xuICAgIGlmIChnbG9iYWxUaGlzW2tleV0pIHJldHVybjtcbiAgICBnbG9iYWxUaGlzW2tleV0gPSB0cnVlO1xuXG4gICAgbGV0IGxhc3RJZHggPSAtMTtcbiAgICBsZXQgdGlja2luZyA9IGZhbHNlO1xuXG4gICAgY29uc3QgdXBkYXRlRnJvbVNjcm9sbCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRpY2tpbmcgPSBmYWxzZTtcbiAgICAgIGlmIChEYXRlLm5vdygpIDwgc3VwcHJlc3NTY3JvbGxUb01hcFVudGlsKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGlkeCA9IGdldEFjdGl2ZVRyaWdnZXJJbmRleCgpO1xuICAgICAgaWYgKGlkeCA9PT0gbGFzdElkeCkgcmV0dXJuO1xuXG4gICAgICBsYXN0SWR4ID0gaWR4O1xuICAgICAgYXdhaXQgZ2xvYmFsVGhpcy5zZXRMYXllcihpZHgpO1xuICAgIH07XG5cbiAgICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHtcbiAgICAgIGlmICh0aWNraW5nKSByZXR1cm47XG4gICAgICB0aWNraW5nID0gdHJ1ZTtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVGcm9tU2Nyb2xsKTtcbiAgICB9O1xuXG4gICAgLy8gRHJpdmUgbGF5ZXJzIGZyb20gc2Nyb2xsIHBvc2l0aW9uXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25TY3JvbGwsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblNjcm9sbCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgLy8gQWxzbyB1cGRhdGUgd2hlbiBDbG9zZXJlYWQgY2hhbmdlcyB0aGUgYWN0aXZlIHRyaWdnZXIgd2l0aG91dCBhIOKAnHNjcm9sbOKAnSBldmVudFxuICAgIC8vIChzb21lIGltcGxlbWVudGF0aW9ucyB0b2dnbGUgY2xhc3NlcyAvIHRyYW5zZm9ybXMpLiBUaGlzIGlzIGNoZWFwIGFuZCByb2J1c3QuXG4gICAgY29uc3QgdHJpZ2dlcnMgPSBnZXRUcmlnZ2Vyc0ZvclNlY3Rpb24oKTtcbiAgICBpZiAodHJpZ2dlcnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBvYnMgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihvblNjcm9sbCk7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdHJpZ2dlcnMpIHtcbiAgICAgICAgb2JzLm9ic2VydmUodCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFtcImNsYXNzXCIsIFwic3R5bGVcIl0gfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbCBzZXQgYmFzZWQgb24gY3VycmVudCBzY3JvbGwgcG9zaXRpb25cbiAgICBhd2FpdCB1cGRhdGVGcm9tU2Nyb2xsKCk7XG4gIH1cblxuICAvLyBJTVBPUlRBTlQ6IHJlbW92ZSB0aGUgYmFzZWxheWVyY2hhbmdlIC0+IHNjcm9sbFRvVHJpZ2dlciBiZWhhdmlvci5cbiAgLy8gVGhlIHVzZXIgY2FuIHN0aWxsIGNsaWNrIHRoZSBsYXllciBjb250cm9sIG1hbnVhbGx5OyBpdCBqdXN0IHdvbid0IGZvcmNlLXNjcm9sbCB0aGUgbmFycmF0aXZlLlxuICBhd2FpdCBpbnN0YWxsU2Nyb2xsRHJpdmVzTGF5ZXIoKTtcbiAgbnVsbFxufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xuICBpZiAodHlwZW9mIGNyVHJpZ2dlckluZGV4ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBnbG9iYWxUaGlzLnNldExheWVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCB1bnRpbCA9IGdsb2JhbFRoaXMuX19jclN1cHByZXNzU2Nyb2xsVG9NYXBVbnRpbD8uKCkgPz8gMDtcbiAgICBpZiAoRGF0ZS5ub3coKSA+PSB1bnRpbCkge1xuICAgICAgZ2xvYmFsVGhpcy5zZXRMYXllcihjclRyaWdnZXJJbmRleCk7XG4gICAgfVxuICB9XG4gIG51bGxcbn1cbiJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>